{% extends "admin/base.html" %}

{% block page_title %}仪表盘{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-4">
        <div class="card stat-card">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="stat-number">{{ stats.articles }}</div>
                        <div class="stat-label">总文章数</div>
                    </div>
                    <i class="fas fa-file-alt fa-2x text-primary"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card stat-card" style="border-left-color: #e74c3c;">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="stat-number">{{ stats.videos }}</div>
                        <div class="stat-label">总视频数</div>
                    </div>
                    <i class="fas fa-video fa-2x text-danger"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card stat-card" style="border-left-color: #2ecc71;">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="stat-number">{{ stats.images }}</div>
                        <div class="stat-label">总图片数</div>
                    </div>
                    <i class="fas fa-images fa-2x text-success"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">快速操作</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{{ url_for('admin_article_new') }}" class="btn btn-primary">
                        <i class="fas fa-plus me-2"></i>创建新文章
                    </a>
                    <a href="{{ url_for('admin_video_new') }}" class="btn btn-danger">
                        <i class="fas fa-plus me-2"></i>添加新视频
                    </a>
                    <a href="{{ url_for('admin_image_upload') }}" class="btn btn-success">
                        <i class="fas fa-upload me-2"></i>上传新图片
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">系统信息</h5>
            </div>
            <div class="card-body">
                <table class="table table-borderless">
                    <tr>
                        <td><i class="fas fa-server me-2"></i>系统版本</td>
                        <td>CMS v1.0</td>
                    </tr>
                    <tr>
                        <td><i class="fas fa-calendar me-2"></i>当前时间</td>
                        <td id="currentTime"></td>
                    </tr>
                    <tr>
                        <td><i class="fas fa-user me-2"></i>登录用户</td>
                        <td>admin</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    function updateTime() {
        const now = new Date();
        const timeString = now.getFullYear() + '-' +
                          String(now.getMonth() + 1).padStart(2, '0') + '-' +
                          String(now.getDate()).padStart(2, '0') + ' ' +
                          String(now.getHours()).padStart(2, '0') + ':' +
                          String(now.getMinutes()).padStart(2, '0');
        document.getElementById('currentTime').textContent = timeString;
    }
    updateTime();
    setInterval(updateTime, 60000); // 每分钟更新一次
});
</script>
{% endblock %}
