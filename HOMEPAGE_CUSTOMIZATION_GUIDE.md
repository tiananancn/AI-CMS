# AI-CMS 首页可定制化功能指南

## 功能概述

AI-CMS现在支持完全可定制的首页布局，您可以通过拖拽的方式调整文章、图片、视频等元素的位置，所有配置都可以在后台管理。

## 主要特性

### ✨ 1. 拖拽式布局调整
- **支持区域排序**：可以拖拽调整 Hero区域、文章区域、视频区域、图片区域的显示顺序
- **可视化操作**：通过直观的拖拽界面轻松调整布局
- **实时预览**：调整后可以立即预览效果

### 🎨 2. 完全可定制的Hero区域
- **自定义标题**：设置欢迎主标题
- **自定义副标题**：添加吸引人的描述文字
- **按钮配置**：可配置两个按钮的文本和链接
- **显示控制**：可选择是否显示按钮

### 📝 3. 灵活的内容区域
每个内容区域都可以独立配置：
- **显示/隐藏**：可以单独开启或关闭任何区域
- **自定义标题**：每个区域都可以设置自己的标题
- **数量控制**：可以设置显示多少条内容（1-20条）
- **自动排序**：内容按发布时间自动排序

### 💾 4. 配置持久化
- **数据库存储**：所有配置保存在数据库中，重启后不丢失
- **一键保存**：修改后点击保存按钮即可应用配置
- **默认配置**：首次启动时自动创建默认配置

## 使用指南

### 访问首页配置

1. 登录后台管理（`/admin/login`，默认账号：admin/admin）
2. 在左侧导航栏点击 **"首页配置"**
3. 进入首页配置管理页面

### 配置首页布局

#### 拖拽调整区域顺序

1. 在"布局配置"区域，找到要调整的区块
2. 鼠标悬停在左侧的 **拖拽图标** 上（`⋮⋮`）
3. 按住鼠标左键拖拽到目标位置
4. 释放鼠标完成排序

#### 设置区域属性

1. 找到要配置的区块
2. 在"区域标题"输入框中输入自定义标题
3. 在"显示数量"输入框中设置显示的内容条数（1-20）
4. 使用右侧的开关控制区域是否显示

#### 配置Hero区域

1. 在右侧"Hero区域设置"面板中：
   - **主标题**：输入首页欢迎标题
   - **副标题**：输入描述文字
   - **显示按钮**：勾选是否显示按钮
   - **按钮文本和链接**：自定义两个按钮的内容

#### 保存配置

1. 完成所有调整后，点击 **"保存配置"** 按钮
2. 系统会弹出成功提示
3. 点击"预览首页"按钮查看效果

## 默认配置

首次启动时，系统会自动创建以下默认配置：

```
Hero区域：
├── 主标题：欢迎来到AI-CMS
├── 副标题：智能内容管理系统，让创作更简单
└── 按钮：阅读文章、观看视频

文章区域：
├── 标题：最新文章
├── 显示：开启
├── 数量：6条

视频区域：
├── 标题：最新视频
├── 显示：开启
├── 数量：6条

图片区域：
├── 标题：最新图片
├── 显示：开启
├── 数量：8条
```

## 技术实现

### 数据库模型

新增 `HomepageConfig` 模型：
- 存储配置名称、配置数据（JSON）、启用状态
- 支持配置数据的序列化和反序列化

### 前端技术

- **SortableJS**：实现拖拽排序功能
- **Bootstrap 5**：响应式UI组件
- **AJAX**：实时保存配置，无需刷新页面

### 后端支持

- `/api/admin/homepage-config` GET：获取首页配置
- `/api/admin/homepage-config` PUT：更新首页配置
- 支持配置数据的验证和保存

## 访问地址

- **首页**：http://localhost:8080/
- **后台管理**：http://localhost:8080/admin/login
- **首页配置**：http://localhost:8080/admin/homepage-config
- **默认账号**：admin / admin

## 高级用法

### 隐藏特定区域

如果不想在首页显示某个区域（例如只显示文章和视频）：
1. 在首页配置页面找到"图片区域"
2. 关闭右侧的显示开关
3. 点击"保存配置"
4. 首页将不再显示图片区域

### 自定义区域标题

可以为每个区域设置有意义的标题：
- "最新文章" → "技术分享"
- "最新视频" → "视频教程"
- "最新图片" → "精美图集"

### 调整内容数量

根据需要调整每个区域显示的内容数量：
- 文章：3-12条（适合首页展示）
- 视频：3-8条（避免页面过长）
- 图片：6-12条（支持网格布局）

## 注意事项

1. **保存后生效**：所有修改都需要点击"保存配置"按钮才会生效
2. **预览功能**：可以在新标签页中预览首页效果
3. **浏览器缓存**：如果看不到更新，尝试硬刷新（Ctrl+Shift+R）
4. **数据来源**：显示的内容来自已发布（published）的文章、视频、图片

## 故障排除

### 问题：拖拽不工作
**解决方案**：
- 确保使用的是现代浏览器（Chrome、Firefox、Safari、Edge）
- 检查浏览器控制台是否有JavaScript错误

### 问题：保存后没有变化
**解决方案**：
- 检查浏览器控制台是否有错误信息
- 确认数据库文件有写入权限
- 尝试重启应用

### 问题：看不到首页配置菜单
**解决方案**：
- 确认已经登录后台管理
- 检查用户权限是否为管理员

## 未来扩展

这个可定制的首页系统可以轻松扩展，支持：
- 更多内容类型（公告、链接、HTML块等）
- 多种布局模板
- A/B测试不同布局
- 基于用户角色的个性化首页
- 移动端独立布局设置

---

**AI-CMS - 让首页定制变得简单高效！** 🎉
