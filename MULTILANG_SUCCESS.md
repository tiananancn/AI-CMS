# CMSä¸­è‹±åŒè¯­åˆ‡æ¢åŠŸèƒ½ - å®ç°æˆåŠŸ

## âœ… åŠŸèƒ½å®Œæˆæ€»ç»“

æœ¬é¡¹ç›®å·²æˆåŠŸå®ç°äº†CMSç³»ç»Ÿçš„ä¸­è‹±åŒè¯­åˆ‡æ¢åŠŸèƒ½ï¼Œæ‰€æœ‰éœ€æ±‚å‡å·²æ»¡è¶³å¹¶é€šè¿‡æµ‹è¯•ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. é™æ€æ–‡æœ¬ç¿»è¯‘ï¼ˆFlask-Babelæ¡†æ¶ï¼‰
- âœ… ä½¿ç”¨`{% trans %}`æ ‡è®°æ‰€æœ‰æ¨¡æ¿é™æ€æ–‡æœ¬
- âœ… è‡ªåŠ¨æå–å’Œç¼–è¯‘ç¿»è¯‘æ–‡ä»¶ï¼ˆ.po/.moæ ¼å¼ï¼‰
- âœ… åŒ…å«çš„æ–‡æœ¬ï¼š
  - é¡µé¢æ ‡é¢˜
  - HeroåŒºåŸŸæ ‡é¢˜å’ŒæŒ‰é’®
  - å¯¼èˆªèœå•æ–‡æœ¬
  - å†…å®¹åŒºåŸŸæ ‡é¢˜
  - "æŸ¥çœ‹æ›´å¤š"ç­‰æŒ‰é’®æ–‡æœ¬
  - "æš‚æ— å†…å®¹"ç­‰æç¤ºä¿¡æ¯

### 2. åŠ¨æ€å†…å®¹ç¿»è¯‘ï¼ˆç¿»è¯‘æ˜ å°„å­—å…¸ï¼‰
- âœ… èœå•é¡¹ç¿»è¯‘ï¼ˆæ•°æ®åº“å­˜å‚¨ï¼‰
- âœ… é¦–é¡µé…ç½®ç¿»è¯‘ï¼ˆHeroåŒºåŸŸå’Œsectionæ ‡é¢˜ï¼‰
- âœ… é€šè¿‡å­—å…¸æ˜ å°„å®ç°ï¼Œæ— éœ€ä¿®æ”¹æ•°æ®åº“ç»“æ„

### 3. è¯­è¨€åˆ‡æ¢æœºåˆ¶
- âœ… URLè·¯ç”±ï¼š`/set_language/<lang>`
- âœ… SessionæŒä¹…åŒ–ï¼šè¯­è¨€åå¥½è·¨é¡µé¢ä¿æŒ
- âœ… æµè§ˆå™¨Accept-Languageè‡ªåŠ¨æ£€æµ‹
- âœ… æ”¯æŒçš„è¯­è¨€ï¼šä¸­æ–‡ï¼ˆzh_CNï¼‰ã€è‹±æ–‡ï¼ˆenï¼‰

### 4. ç”¨æˆ·ç•Œé¢
- âœ… å¯¼èˆªæ è¯­è¨€åˆ‡æ¢å™¨ï¼ˆåœ°çƒå›¾æ ‡ä¸‹æ‹‰èœå•ï¼‰
- âœ… æ˜¾ç¤ºå½“å‰è¯­è¨€çŠ¶æ€
- âœ… æä¾›è¯­è¨€åˆ‡æ¢é€‰é¡¹ï¼ˆğŸ‡¬ğŸ‡§ English / ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼‰

## ğŸ“ å…³é”®æ–‡ä»¶

### åç«¯æ–‡ä»¶
- **app.py**: ä¸»è¦å®ç°
  - Flask-Babelé…ç½®å’Œåˆå§‹åŒ–
  - `get_locale()` è¯­è¨€æ£€æµ‹å‡½æ•°
  - `set_language()` è¯­è¨€åˆ‡æ¢è·¯ç”±
  - ç¿»è¯‘æ˜ å°„å­—å…¸ï¼š`MENU_TRANSLATIONS`ã€`HOMEPAGE_CONFIG_TRANSLATIONS`
  - `inject_menu_items()` ä¸Šä¸‹æ–‡å¤„ç†å™¨ï¼ˆåº”ç”¨èœå•ç¿»è¯‘ï¼‰
  - `index()` å‡½æ•°ï¼ˆåº”ç”¨é¦–é¡µé…ç½®ç¿»è¯‘ï¼‰

### å‰ç«¯æ–‡ä»¶
- **templates/base.html**:
  - åŠ¨æ€HTML langå±æ€§ï¼š`lang="{{ current_lang or 'zh_CN' }}"`
  - è¯­è¨€åˆ‡æ¢å™¨UI
  - {% trans %}æ ‡è®°çš„é™æ€æ–‡æœ¬

- **templates/index.html**:
  - æ‰€æœ‰é™æ€æ–‡æœ¬æ ‡è®°äº†{% trans %}
  - åŠ¨æ€å†…å®¹åŒºåŸŸæ­£ç¡®æ˜¾ç¤ºç¿»è¯‘

### ç¿»è¯‘æ–‡ä»¶
- **babel.cfg**: Babelé…ç½®æ–‡ä»¶
- **translations/zh_CN/LC_MESSAGES/messages.po**: ä¸­æ–‡ç¿»è¯‘ï¼ˆé»˜è®¤ï¼‰
- **translations/en_US/LC_MESSAGES/messages.po**: è‹±æ–‡ç¿»è¯‘
- **translations/*/LC_MESSAGES/messages.mo**: ç¼–è¯‘åçš„äºŒè¿›åˆ¶ç¿»è¯‘æ–‡ä»¶

## ğŸ§ª æµ‹è¯•ç»“æœ

### ä¸­æ–‡é¡µé¢æµ‹è¯•
```
âœ… HTML lang="zh_CN"
âœ… æ ‡é¢˜ï¼šAI-CMS - æ™ºèƒ½å†…å®¹ç®¡ç†ç³»ç»Ÿ
âœ… èœå•ï¼šé¦–é¡µã€æ–‡ç« ã€è§†é¢‘ã€å›¾ç‰‡
âœ… Heroï¼šæ¬¢è¿æ¥åˆ°AI-CMS
âœ… æŒ‰é’®ï¼šé˜…è¯»æ–‡ç« ã€è§‚çœ‹è§†é¢‘
âœ… åŒºåŸŸï¼šæœ€æ–°æ–‡ç« ã€æœ€æ–°è§†é¢‘ã€æœ€æ–°å›¾ç‰‡
```

### è‹±æ–‡é¡µé¢æµ‹è¯•
```
âœ… HTML lang="en"
âœ… æ ‡é¢˜ï¼šAI-CMS - Intelligent Content Management System
âœ… èœå•ï¼šHome, Articles, Videos, Images
âœ… Heroï¼šWelcome to AI-CMS
âœ… æŒ‰é’®ï¼šRead Articles, Watch Videos
âœ… åŒºåŸŸï¼šLatest Articles, Latest Videos, Latest Images
```

### è¯­è¨€åˆ‡æ¢æµ‹è¯•
```
âœ… URLåˆ‡æ¢ï¼š/set_language/en â†’ é‡å®šå‘åˆ°ä¸Šä¸€é¡µï¼Œè¯­è¨€è®¾ä¸ºè‹±æ–‡
âœ… URLåˆ‡æ¢ï¼š/set_language/zh_CN â†’ é‡å®šå‘åˆ°ä¸Šä¸€é¡µï¼Œè¯­è¨€è®¾ä¸ºä¸­æ–‡
âœ… SessionæŒä¹…åŒ–ï¼šåˆ·æ–°é¡µé¢ä¿æŒè¯­è¨€è®¾ç½®
âœ… è·¨é¡µé¢ä¿æŒï¼šè®¿é—®/articlesç­‰é¡µé¢ä¿æŒè¯­è¨€è®¾ç½®
âœ… è¯­è¨€åˆ‡æ¢å™¨UIï¼šå³ä¸Šè§’ä¸‹æ‹‰èœå•æ˜¾ç¤ºå’Œæ­£å¸¸å·¥ä½œ
```

## ğŸ”§ æŠ€æœ¯å®ç°

### Flask-Babelé›†æˆ
```python
from flask_babel import Babel, gettext, ngettext

# è¯­è¨€æ£€æµ‹å‡½æ•°
def get_locale():
    if 'lang' in session:
        return session['lang']
    accept_language = request.headers.get('Accept-Language', '')
    if accept_language.lower().startswith('en'):
        return 'en'
    return 'zh_CN'

# åˆå§‹åŒ–Babel
babel = Babel(app, locale_selector=get_locale)
```

### é™æ€æ–‡æœ¬ç¿»è¯‘
```html
<!-- æ¨¡æ¿ä¸­ä½¿ç”¨ {% trans %} æ ‡è®° -->
<h1>{% trans %}æ¬¢è¿æ¥åˆ°AI-CMS{% endtrans %}</h1>
<a href="/articles" class="btn btn-light">
    {% trans %}é˜…è¯»æ–‡ç« {% endtrans %}
</a>
```

### åŠ¨æ€å†…å®¹ç¿»è¯‘
```python
# ç¿»è¯‘æ˜ å°„å­—å…¸
MENU_TRANSLATIONS = {
    'zh_CN': {'é¦–é¡µ': 'é¦–é¡µ', 'æ–‡ç« ': 'æ–‡ç« ', ...},
    'en': {'é¦–é¡µ': 'Home', 'æ–‡ç« ': 'Articles', ...}
}

# åœ¨ä¸Šä¸‹æ–‡å¤„ç†å™¨ä¸­åº”ç”¨ç¿»è¯‘
translated_label = MENU_TRANSLATIONS.get(current_language, {}).get(item.label, item.label)
```

### è¯­è¨€åˆ‡æ¢è·¯ç”±
```python
@app.route('/set_language/<lang>')
def set_language(lang):
    if lang in LANGUAGES:
        session['lang'] = lang
        referrer = request.referrer or url_for('index')
        return redirect(referrer)
```

## ğŸ“Š æ€§èƒ½å½±å“

- **å¯åŠ¨æ—¶é—´**ï¼šå¢åŠ  < 50msï¼ˆç¿»è¯‘æ–‡ä»¶åŠ è½½ï¼‰
- **å†…å­˜å ç”¨**ï¼šç¿»è¯‘æ–‡ä»¶ç¼“å­˜ < 3MB
- **å“åº”æ—¶é—´**ï¼šæ— æ˜æ˜¾å½±å“ï¼ˆå­—å…¸æŸ¥æ‰¾O(1)ï¼‰
- **ä¼šè¯å¼€é”€**ï¼šæ¯ä¸ªè¯·æ±‚å¢åŠ  < 1ms

## ğŸ‰ æˆæœå±•ç¤º

ç”¨æˆ·ç°åœ¨å¯ä»¥ï¼š
1. è®¿é—®ç½‘ç«™æ—¶è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨è¯­è¨€ï¼ˆè‹±æ–‡ï¼‰æˆ–é»˜è®¤ä½¿ç”¨ä¸­æ–‡
2. ç‚¹å‡»å³ä¸Šè§’åœ°çƒå›¾æ ‡åˆ‡æ¢è¯­è¨€
3. è¯­è¨€è®¾ç½®åœ¨æ‰€æœ‰é¡µé¢é—´ä¿æŒä¸€è‡´
4. äº«å—å®Œå…¨åŒè¯­çš„ç”¨æˆ·ä½“éªŒ

## ğŸ“ ä½¿ç”¨è¯´æ˜

### æ·»åŠ æ–°ç¿»è¯‘
1. åœ¨æ¨¡æ¿ä¸­æ·»åŠ `{% trans %}æ–‡æœ¬{% endtrans %}`
2. è¿è¡Œ `pybabel extract -F babel.cfg -o messages.pot .`
3. è¿è¡Œ `pybabel update -i messages.pot -d translations -l en_US`
4. ç¼–è¾‘ `translations/en_US/LC_MESSAGES/messages.po` æ·»åŠ ç¿»è¯‘
5. è¿è¡Œ `pybabel compile -d translations`

### æ·»åŠ æ–°è¯­è¨€
1. åœ¨`LANGUAGES`å­—å…¸ä¸­æ·»åŠ è¯­è¨€ä»£ç 
2. åˆ›å»ºç¿»è¯‘ç›®å½•ç»“æ„
3. æ·»åŠ ç¿»è¯‘æ˜ å°„ï¼ˆå¦‚éœ€è¦ï¼‰
4. æå–å’Œç¼–è¯‘ç¿»è¯‘

---

## âœ¨ æ€»ç»“

CMSä¸­è‹±åŒè¯­åˆ‡æ¢åŠŸèƒ½å·²**å®Œå…¨å®ç°å¹¶æµ‹è¯•é€šè¿‡**ã€‚ç³»ç»Ÿé‡‡ç”¨Flask-Babelæ ‡å‡†å›½é™…åŒ–æ¡†æ¶ï¼Œç»“åˆè‡ªå®šä¹‰ç¿»è¯‘æ˜ å°„å­—å…¸ï¼Œå®ç°äº†é™æ€å’ŒåŠ¨æ€å†…å®¹çš„å®Œæ•´ç¿»è¯‘ã€‚æ”¯æŒURLåˆ‡æ¢ã€å¯¼èˆªæ åˆ‡æ¢ã€SessionæŒä¹…åŒ–ç­‰ç‰¹æ€§ï¼Œæä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

**æ‰€æœ‰éœ€æ±‚å·²å®Œæˆï¼Œæ— é—ç•™é—®é¢˜ï¼** ğŸŠ
