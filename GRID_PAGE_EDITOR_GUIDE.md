# AI-CMS 网格页面编辑器完全指南

## 🎯 功能概述

AI-CMS 现在提供了一个强大的**网格页面编辑器**，允许您通过拖拽的方式在网格中自由放置和调整元素大小，实现完全自定义的页面布局。

## ✨ 核心特性

### 1. 拖拽式网格布局
- **网格系统**：基于CSS Grid的12列网格系统
- **自由拖拽**：从左侧元素库拖拽元素到网格中
- **调整大小**：通过拖拽调整元素的列跨度(colspan)和行跨度(rowspan)
- **实时预览**：所有更改即时反映在编辑画布上

### 2. 可调整的网格参数
- **列数**：4-12列可调整
- **行高**：50-200px可调整
- **间距**：网格间距可自定义

### 3. 丰富的元素类型
支持7种元素类型：

| 元素类型 | 图标 | 默认大小 | 说明 |
|---------|------|---------|------|
| 📝 文本 | fa-file-alt | 12列 × 2行 | 富文本内容，支持HTML |
| 🖼️ 图片 | fa-image | 6列 × 3行 | 图片展示 |
| 🎬 视频 | fa-video | 6列 × 3行 | 视频播放 |
| 💬 引用 | fa-quote-left | 6列 × 2行 | 引用文本 |
| 📰 文章 | fa-newspaper | 6列 × 2行 | 文章引用 |
| 🔘 按钮 | fa-hand-pointer | 3列 × 1行 | 行动按钮 |
| ⬜ 间距 | fa-grip-lines | 自定义 | 空白间距 |

### 4. 可视化操作
- **拖拽排序**：拖拽元素调整顺序
- **大小调整**：拖拽元素边缘调整大小
- **编辑元素**：点击编辑按钮修改内容
- **删除元素**：点击删除按钮移除元素

## 🚀 使用方法

### 步骤1：创建或编辑页面

1. 登录后台管理（`/admin/login`）
2. 进入左侧菜单"动态页面"
3. 点击"新建页面"或选择现有页面
4. 点击操作按钮中的 **"网格"** 按钮

### 步骤2：配置网格参数

在编辑画布右上角：
- 调整**列数**滑块（4-12列）
- 调整**行高**滑块（50-200px）

### 步骤3：添加元素

1. 从左侧**元素库**拖拽元素到网格中
2. 元素会自动放置在合适的位置
3. 继续添加更多元素

### 步骤4：调整布局

1. **拖拽排序**：拖拽元素调整显示顺序
2. **调整大小**：
   - 拖拽元素右侧边缘调整列跨度
   - 拖拽元素底部边缘调整行跨度
   - 拖拽右下角同时调整宽度和高度
3. **实时预览**：所有更改即时显示

### 步骤5：编辑元素内容

1. 点击元素上的**编辑按钮**（铅笔图标）
2. 在弹出的模态框中配置元素
3. 点击"保存"应用更改

### 步骤6：保存页面

1. 点击右上角"**保存**"按钮
2. 弹出"✅ 网格布局已保存！"提示
3. 点击"预览"按钮查看效果

## 🎨 元素详细配置

### 文本元素
- **内容**：支持HTML格式的富文本
- **背景色**：可自定义背景颜色
- **文字颜色**：可自定义文字颜色
- **默认大小**：12列 × 2行

### 图片元素
- **图片URL**：输入图片地址
- **Alt文本**：图片描述（SEO友好）
- **默认大小**：6列 × 3行

### 视频元素
- **视频URL**：输入视频文件地址
- **默认大小**：6列 × 3行

### 引用元素
- **引用文本**：输入引用内容
- **作者**：引用来源
- **默认大小**：6列 × 2行

### 文章元素
- **选择文章**：从下拉列表选择文章
- **默认大小**：6列 × 2行

### 按钮元素
- **按钮文本**：显示文字
- **链接地址**：点击跳转地址
- **按钮样式**：主要/次要/成功/危险
- **默认大小**：3列 × 1行

### 间距元素
- **高度**：设置空白区域高度（px）
- **默认大小**：自适应

## 🛠️ 技术实现

### 前端技术栈
- **CSS Grid**：实现网格布局
- **SortableJS**：拖拽排序
- **InteractJS**：调整元素大小
- **Bootstrap 5**：UI组件
- **Font Awesome**：图标

### 数据存储
- **模型**：`ContentBlock` 模型存储每个元素
- **字段**：
  - `block_type`：元素类型
  - `content_data`：元素内容（JSON）
  - `style_data`：元素样式（JSON）
  - `sort_order`：显示顺序

### API端点
- `GET /api/admin/pages/{id}/grid-layout` - 获取网格布局
- `POST /api/admin/pages/{id}/grid-layout` - 保存网格布局
- `GET /api/dynamic-pages/{slug}/blocks` - 前台获取页面内容

## 📱 响应式支持

### 桌面端
- 完整网格功能
- 12列布局
- 所有拖拽和调整功能

### 平板端
- 自动调整为4列布局
- 保持拖拽功能
- 调整触摸操作

### 手机端
- 自动调整为4列布局
- 简化编辑界面
- 优化触摸操作

## 🎯 使用技巧

### 1. 布局规划
- 先规划整体布局再添加内容
- 使用文本元素作为标题
- 使用图片和视频作为视觉焦点
- 使用按钮引导用户行动

### 2. 大小调整
- 标题使用12列宽度
- 正文内容使用6-8列宽度
- 图片可以使用4-6列宽度
- 按钮使用2-3列宽度

### 3. 视觉平衡
- 保持网格间距一致
- 避免元素过于拥挤
- 合理使用间距元素
- 注意颜色搭配

### 4. 性能优化
- 图片压缩后上传
- 避免过多视频元素
- 合理使用HTML内容

## 🔍 故障排除

### 问题1：拖拽不工作
**解决方案**：
- 检查浏览器控制台错误
- 确保使用现代浏览器（Chrome、Firefox、Safari、Edge）
- 清除浏览器缓存

### 问题2：大小调整不准确
**解决方案**：
- 拖拽时观察网格线对齐
- 调整网格参数后再调整元素
- 检查元素是否被其他元素阻挡

### 问题3：保存失败
**解决方案**：
- 检查网络连接
- 确认已登录
- 查看服务器日志

### 问题4：预览显示异常
**解决方案**：
- 确认元素内容已保存
- 检查图片/视频URL是否有效
- 清除浏览器缓存

## 📈 高级功能

### 1. 批量操作
- 可以同时选择多个元素
- 支持批量删除
- 支持批量调整大小（计划中）

### 2. 模板系统
- 保存页面布局为模板（计划中）
- 一键应用模板（计划中）
- 模板分享功能（计划中）

### 3. A/B测试
- 多个布局版本（计划中）
- 效果统计（计划中）
- 自动优化（计划中）

## 🎓 最佳实践

### 设计原则
1. **简洁明了**：避免过度复杂的设计
2. **一致性**：保持视觉风格统一
3. **可读性**：确保文字清晰可读
4. **可访问性**：添加适当的Alt文本

### 内容策略
1. **标题层次**：使用不同大小的文本元素
2. **视觉引导**：使用图片和按钮引导用户
3. **空白空间**：合理使用间距元素
4. **行动召唤**：放置明确的按钮

## 🌟 成功案例

### 案例1：产品展示页
```
Hero区域（12列×3行）
├── 标题文本
└── 行动按钮

产品特性（12列×4行）
├── 图片（6列×3行）
├── 文本说明（6列×3行）
├── 图片（6列×3行）
└── 文本说明（6列×3行）
```

### 案例2：新闻文章页
```
标题区域（12列×2行）
├── 大标题文本

内容区域（8列×auto）
├── 正文文本
└── 图片引用

侧边栏（4列×auto）
├── 文章列表
└── 标签云
```

### 案例3：服务介绍页
```
服务概览（12列×2行）
├── 服务标题文本

服务详情（12列×6行）
├── 服务1（4列×2行）
├── 服务2（4列×2行）
├── 服务3（4列×2行）
└── 服务描述（12列×4行）
```

## 📚 相关文档

- [动态页面管理](./DYNAMIC_PAGE_GUIDE.md)
- [内容块API文档](./API_DOCS.md)
- [首页配置指南](./HOMEPAGE_CUSTOMIZATION_GUIDE.md)
- [完整API文档](../app.py)

## 🎉 总结

AI-CMS 网格页面编辑器提供了强大的可视化编辑能力，让您能够：

✅ **自由拖拽** - 轻松创建复杂布局
✅ **自由调整** - 精确控制元素大小
✅ **实时预览** - 所见即所得的编辑体验
✅ **响应式设计** - 完美适配各种设备
✅ **丰富元素** - 7种元素类型满足各种需求
✅ **数据持久化** - 所有更改自动保存

立即开始使用，创建您的第一个网格布局页面吧！🚀

---

**AI-CMS 网格页面编辑器 - 让页面设计变得简单而强大！** ✨
